---
title: 製作虛擬運算個體快照的最佳做法 | en
tags: Guide, VCS, EN
GA: UA-155999456-1
---

{%hackmd @docsharedstyle/default %}
{%hackmd @docsharedstyle/twccheader-en %}

# Best practices to create a VCS instance image

You can create [TWCC VCS instance image](https://man.twcc.ai/@twccdocs/vcs-vds-instance-image-en) in a variety of situations, **but before creating, please perform the following tasks to ensure that the image is effectively obtained**:

- **Create the image after [shutdown](#How-to-shutdown?)**. If the instance state is Ready and there is still I/O, it will take several time to create an image. So, create the image after shutdown to ensure that the creation time will not be too long.
- **If the instance has mounted the data disk automatically, it is recommended to [add "nofail"](#How-to-add-nofail?) in the command before creating an image** to ensure that the instance can be started and connected normally.


## How to shutdown?

- After connecting to the instance via SSH, you can use shutdown command to shut down the instance.

```bash
$ sudo shutdown
```

- After shutdown, the instance state will enter in **`shutdown`** state.

:::warning
![](https://cos.twcc.ai/SYS-MANUAL/uploads/upload_d0a1329d89f244dfca9d602ef826b0dd.png)
:::

:::info
<i class="fa fa-paperclip fa-20" aria-hidden="true"></i> **Note:** 
For the relationship between instance state and billing, see [<ins>VCS instance lifecycle</ins>](https://www.twcc.ai/doc?page=concept-vcs-lifecycle).
:::



## How to add nofail?

- If you have set the auto mount data disk command in the /etc/fstab file
(for example, `/dev/vdb /mnt ext4 defaults`)

![](https://cos.twcc.ai/SYS-MANUAL/uploads/upload_09ddb7ad46cfae66dcb3fa7cb75244c0.png)

- Please add `nofail` after the original settings to avoid errors in mounting the data disk, causing the instance you created with the image to fail to start and connect normally.
(for example, `,nofail,x-systemd.device-timeout=1m`)

![](https://cos.twcc.ai/SYS-MANUAL/uploads/upload_d82af67186cc021e21a4f4d59630cc4d.png)
